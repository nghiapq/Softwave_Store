<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>Software Store</title>
		<link rel="stylesheet" href="css/animate.css">
		<link rel="stylesheet" href="css/home.css">
		<link rel="shortcut icon" type="image/png" href="https://firebasestorage.googleapis.com/v0/b/assignment-nghiapqps03124.appspot.com/o/software.png?alt=media&token=422bca22-b458-49b8-bd9c-f300b1bc112a" />
	</head>

	<body>
		<header>
			<div id="myNav" class="overlay">
			  <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">×</a>
			  <div class="overlay-content">
				<a href="#" style="color:#f1f1f1">Trang chủ</a>
				<a href="#showItemProduct">Sản phẩm</a>
				<a href="#section">Giới thiệu</a>
				<a href="#">Liên hệ</a>
				<a href="#" id="loginclick" onclick="document.getElementById('id01').style.display='block'">Đăng nhập</a>
				<a href="#" id="logoutclick" onclick="logout();">Đăng xuất</a>
			  </div>
			</div>
		
			<span style="font-size:30px;cursor:pointer;position:fixed;z-index:2;left:10px;top:5px;color:white" onclick="openNav()">☰</span>
		
			<div class="slideshow-container animated rotateInUpLeft">

			<div class="mySlides fade">
			  <img src="https://firebasestorage.googleapis.com/v0/b/assignment-nghiapqps03124.appspot.com/o/2.jpg?alt=media&token=660a2604-60be-4c94-8d18-2fadd3c766ee" style="width:100%;height:500px;">
			  <div class="text">Key kích hoạt tất cả phần mềm Adobe</div>
			</div>

			<div class="mySlides fade">
			  <img src="https://firebasestorage.googleapis.com/v0/b/assignment-nghiapqps03124.appspot.com/o/1.jpg?alt=media&token=90cded1f-b50a-4594-ba96-4dac3403a68d" style="width:100%;height:500px;">
			  <div class="text">Chất lượng hơn số lượng</div>
			</div>

			<div class="mySlides fade">
			  <img src="https://firebasestorage.googleapis.com/v0/b/assignment-nghiapqps03124.appspot.com/o/3.jpg?alt=media&token=d7308e29-fe5a-4ac9-882a-ddd24cc6015a" style="width:100%;height:500px;">
			  <div class="text">Dịch vụ hoạt động vĩnh viễn</div>
			</div>

			<a class="prev" onclick="plusSlides(-1)"><</a>
			<a class="next" onclick="plusSlides(1)">></a>

			</div>
			<br>

			<div style="text-align:center">
			  <span class="dot" onclick="currentSlide(1)"></span>
			  <span class="dot" onclick="currentSlide(2)"></span>
			  <span class="dot" onclick="currentSlide(3)"></span>
			</div>
			
			<div id="id01" class="modal">
  
			  <form class="modal-content animate">
				<div class="imgcontainer">
				  <span onclick="document.getElementById('id01').style.display='none'" class="close" title="Close Modal">&times;</span>
				  
				</div>

				<div class="container">
				  <label><b>Tài khoản</b></label>
				  <input type="text" placeholder="Nhập tài khoản" id="usernamehome">

				  <label><b>Mật khẩu</b></label>
				  <input type="password" placeholder="Nhập mật khẩu" id="passwordhome">
					
				  <input type="button" value="Đăng nhập" id="buttonlogin" onclick="loginhome();">
				</div>

				<div class="containerfooter" style="background-color:#f1f1f1">
				  <button type="button" onclick="document.getElementById('id01').style.display='none'" class="cancelbtn">Đóng</button>
				</div>
			  </form>
			</div>
			
			<div id="snackbar">Đăng nhập thành công</div>
		</header>
		<section class="animated zoomInUp" id="section">
			<div class="card">
			  <img src="https://firebasestorage.googleapis.com/v0/b/assignment-nghiapqps03124.appspot.com/o/lamkinbrian.jpg?alt=media&token=969dadf9-eab0-4ebb-9eea-bc658b617cb5" alt="Avatar" style="width:100%">
			  <div class="container">
				<h4><b>Bryan Lamkin</b></h4>
				<p>Phó chủ tịch & Giám đốc</p>
			  </div>
			</div>
			
			<div class="introduce">
				<div class="introduce-title">
					Bryan Lamkin
				</div>
				<div class="introduce-content">
					Ông là phó chủ tịch điều hành kiêm tổng giám đốc Digital Media của Adobe. 
					<br />
					Lamkin làm việc cho Adobe từ năm 1992 đến năm 2006 ở các vị trí cao tại đây.
					<br />
					Ông tái gia nhập công ty vào tháng Hai năm 2013 khi phó chủ tịch cấp cao về công nghệ và phát triển của công ty trước chuyển sang bộ phận khác.
					<br />
					Ông có bằng Cử nhân và Thạc sĩ Quản trị Kinh doanh tại Đại học California, Berkeley và là một thành viên của Phi Beta Kappa Honors Society.
				</div>
				<div class="introduce-footer">
				</div>
			</div>
		</section>
		<article>
			<div id="showItemProduct">
				
			</div>
		</article>
	</body>
	<script src="https://www.gstatic.com/firebasejs/3.1.0/firebase-app.js"></script>
	<script src="https://www.gstatic.com/firebasejs/3.1.0/firebase-auth.js"></script>
	<script src="https://www.gstatic.com/firebasejs/3.1.0/firebase-database.js"></script>
	<script src="https://www.gstatic.com/firebasejs/3.2.1/firebase.js"></script>
	<script>
		var logoutclick = document.getElementById("logoutclick");
		var loginclick = document.getElementById("loginclick");
		var toasthome = document.getElementById("snackbar");
	
		var config = {
			apiKey: "AIzaSyC3XSc2ifCPghMtvkph1sNu4XdEt9Cn78g",
			authDomain: "assignment-nghiapqps03124.firebaseapp.com",
			databaseURL: "https://assignment-nghiapqps03124.firebaseio.com",
			storageBucket: "assignment-nghiapqps03124.appspot.com",
		};
		firebase.initializeApp(config);
	
		function logout(){
			firebase.auth().signOut().then(function() {
			  // Sign-out successful.
			}, function(error) {
			  // An error happened.
			});
		}
		
		
		firebase.auth().onAuthStateChanged(function(user) {
			if (user) {
				console.log("Đã đăng nhập");
				loginclick.style.display = "none";
				modal.style.display = "none";
				logoutclick.style.display = "block";
				document.getElementById("usernamehome").value="";
				document.getElementById("passwordhome").value="";
				if(user.uid == "5CZSGjZx4cfMTWeirPr7CKmjLvF3"){
					location = "admin.html";
				}
				console.log(user.uid);
			} else {
				console.log("Không có đăng nhập !");
				logoutclick.style.display = "none";
				loginclick.style.display = "block";
			}
		});
		
		var commentsRef = firebase.database().ref('product');
		var listItem = document.getElementById("showItemProduct");
		
		commentsRef.on('child_added', function(data) {
		  listItem.innerHTML += '<div class="cardarticle">'
				  +'<img src="'+data.val().imagesproduct+'">'
				  +'<div class="container">'
					+'<h4><b>'+data.val().nameproduct+'</b></h4>'
					+'<p>'+data.val().price+' USD</p>'
				  +'</div>'
				  +'<div class="control">'
					+'<input type="button" value="Mua" id="buttonBuy">'
				  +'</div>'
				+'</div>';
		});
		
		function loginhome(){
			var username = document.getElementById("usernamehome").value;
			var pass = document.getElementById("passwordhome").value;
			
			firebase.auth().signInWithEmailAndPassword(username, pass).catch(function(error) {
			  // Handle Errors here.
			  var errorCode = error.code;
			  var errorMessage = error.message;
			  toasthome.className = "show";
			  toasthome.innerHTML = errorMessage;
			  setTimeout(function(){ toasthome.className = toasthome.className.replace("show", ""); }, 3000);
			});
			
		}
	
		var slideIndex = 1;
		showSlides(slideIndex);

		function plusSlides(n) {
		  showSlides(slideIndex += n);
		}

		function currentSlide(n) {
		  showSlides(slideIndex = n);
		}

		function showSlides(n) {
		  var i;
		  var slides = document.getElementsByClassName("mySlides");
		  var dots = document.getElementsByClassName("dot");
		  if (n > slides.length) {slideIndex = 1}
		  if (n < 1) {slideIndex = slides.length}
		  for (i = 0; i < slides.length; i++) {
			  slides[i].style.display = "none";
		  }
		  for (i = 0; i < dots.length; i++) {
			  dots[i].className = dots[i].className.replace(" active", "");
		  }
		  slides[slideIndex-1].style.display = "block";
		  dots[slideIndex-1].className += " active";
		}
		
		function openNav() {
			document.getElementById("myNav").style.width = "300px";
		}

		function closeNav() {
			document.getElementById("myNav").style.width = "0%";
		}
		
		// Get the modal
		var modal = document.getElementById('id01');

		// When the user clicks anywhere outside of the modal, close it
		window.onclick = function(event) {
			if (event.target == modal) {
				modal.style.display = "none";
			}
		}
	</script>

</html>